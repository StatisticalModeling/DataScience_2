<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="STT 3860">

<title>Tidyverse Principles</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="tidyverse_primer_files/libs/clipboard/clipboard.min.js"></script>
<script src="tidyverse_primer_files/libs/quarto-html/quarto.js"></script>
<script src="tidyverse_primer_files/libs/quarto-html/popper.min.js"></script>
<script src="tidyverse_primer_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="tidyverse_primer_files/libs/quarto-html/anchor.min.js"></script>
<link href="tidyverse_primer_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tidyverse_primer_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="tidyverse_primer_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="tidyverse_primer_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="tidyverse_primer_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<link href="tidyverse_primer_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="tidyverse_primer_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="tidyverse_primer_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="tidyverse_primer_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="tidyverse_primer_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="tidyverse_primer_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="tidyverse_primer_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="tidyverse_primer_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="tidyverse_primer_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="tidyverse_primer_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tidyverse Principles</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>STT 3860 </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──
✔ broom        1.0.7     ✔ rsample      1.2.1
✔ dials        1.3.0     ✔ tune         1.2.1
✔ infer        1.0.7     ✔ workflows    1.1.4
✔ modeldata    1.4.0     ✔ workflowsets 1.1.0
✔ parsnip      1.2.1     ✔ yardstick    1.3.1
✔ recipes      1.1.0     
── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Dig deeper into tidy modeling with R at https://www.tmwr.org</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidymodels_prefer</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="What is the `tidyverse`?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is the <code>tidyverse</code>?
</div>
</div>
<div class="callout-body-container callout-body">
<p>At a high leve, the tidyverse is a language for solving data science challenges with <code>R</code> code. Its primary goal is to facilitate a conversation between a human and a computer about data. Less abstractly, the tidyverse is a collection of <code>R</code> packages that share a high-level design philosophy and a low-level grammar and data structures, so that learning one package makes it easier to learn the next.</p>
</div>
</div>
<p>What are some packages you have used in previous courses that use tidyverse principles?</p>
<ul>
<li><code>ggplot2</code></li>
<li><code>dplyr</code></li>
<li><code>readr</code></li>
<li><code>infer</code></li>
</ul>
<section id="design-for-humans" class="level2">
<h2 class="anchored" data-anchor-id="design-for-humans">Design for Humans</h2>
<ul>
<li>Consider sorting the <code>mtcars</code> first by <code>gear</code>, then by <code>mpg</code>. First we consider a base <code>R</code> solution:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="fu">order</span>(mtcars<span class="sc">$</span>gear, mtcars<span class="sc">$</span>mpg), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="fu">order</span>(mtcars<span class="sc">$</span>gear, mtcars<span class="sc">$</span>mpg), ] <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-1df3f9545f0176171644" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1df3f9545f0176171644">{"x":{"filter":"none","vertical":false,"data":[["Cadillac Fleetwood","Lincoln Continental","Camaro Z28","Duster 360","Chrysler Imperial","Merc 450SLC","AMC Javelin","Dodge Challenger","Merc 450SE","Merc 450SL","Valiant","Hornet Sportabout","Pontiac Firebird","Hornet 4 Drive","Toyota Corona","Merc 280C","Merc 280","Mazda RX4","Mazda RX4 Wag","Volvo 142E","Datsun 710","Merc 230","Merc 240D","Fiat X1-9","Honda Civic","Fiat 128","Toyota Corolla","Maserati Bora","Ford Pantera L","Ferrari Dino","Porsche 914-2","Lotus Europa"],[10.4,10.4,13.3,14.3,14.7,15.2,15.2,15.5,16.4,17.3,18.1,18.7,19.2,21.4,21.5,17.8,19.2,21,21,21.4,22.8,22.8,24.4,27.3,30.4,32.4,33.9,15,15.8,19.7,26,30.4],[8,8,8,8,8,8,8,8,8,8,6,8,8,6,4,6,6,6,6,4,4,4,4,4,4,4,4,8,8,6,4,4],[472,460,350,360,440,275.8,304,318,275.8,275.8,225,360,400,258,120.1,167.6,167.6,160,160,121,108,140.8,146.7,79,75.7,78.7,71.09999999999999,301,351,145,120.3,95.09999999999999],[205,215,245,245,230,180,150,150,180,180,105,175,175,110,97,123,123,110,110,109,93,95,62,66,52,66,65,335,264,175,91,113],[2.93,3,3.73,3.21,3.23,3.07,3.15,2.76,3.07,3.07,2.76,3.15,3.08,3.08,3.7,3.92,3.92,3.9,3.9,4.11,3.85,3.92,3.69,4.08,4.93,4.08,4.22,3.54,4.22,3.62,4.43,3.77],[5.25,5.424,3.84,3.57,5.345,3.78,3.435,3.52,4.07,3.73,3.46,3.44,3.845,3.215,2.465,3.44,3.44,2.62,2.875,2.78,2.32,3.15,3.19,1.935,1.615,2.2,1.835,3.57,3.17,2.77,2.14,1.513],[17.98,17.82,15.41,15.84,17.42,18,17.3,16.87,17.4,17.6,20.22,17.02,17.05,19.44,20.01,18.9,18.3,16.46,17.02,18.6,18.61,22.9,20,18.9,18.52,19.47,19.9,14.6,14.5,15.5,16.7,16.9],[0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5],[4,4,4,4,4,3,2,2,3,3,1,2,2,1,1,4,4,4,4,2,1,2,2,1,2,1,1,8,4,6,2,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>mpg<\/th>\n      <th>cyl<\/th>\n      <th>disp<\/th>\n      <th>hp<\/th>\n      <th>drat<\/th>\n      <th>wt<\/th>\n      <th>qsec<\/th>\n      <th>vs<\/th>\n      <th>am<\/th>\n      <th>gear<\/th>\n      <th>carb<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"mpg","targets":1},{"name":"cyl","targets":2},{"name":"disp","targets":3},{"name":"hp","targets":4},{"name":"drat","targets":5},{"name":"wt","targets":6},{"name":"qsec","targets":7},{"name":"vs","targets":8},{"name":"am","targets":9},{"name":"gear","targets":10},{"name":"carb","targets":11}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Next consiter sorting <code>mtcars</code> using <code>dplyr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(gear, mpg) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(gear, <span class="at">.before =</span> mpg) <span class="sc">|&gt;</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-df44e351d22267325e8d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-df44e351d22267325e8d">{"x":{"filter":"none","vertical":false,"data":[["Cadillac Fleetwood","Lincoln Continental","Camaro Z28","Duster 360","Chrysler Imperial","Merc 450SLC","AMC Javelin","Dodge Challenger","Merc 450SE","Merc 450SL","Valiant","Hornet Sportabout","Pontiac Firebird","Hornet 4 Drive","Toyota Corona","Merc 280C","Merc 280","Mazda RX4","Mazda RX4 Wag","Volvo 142E","Datsun 710","Merc 230","Merc 240D","Fiat X1-9","Honda Civic","Fiat 128","Toyota Corolla","Maserati Bora","Ford Pantera L","Ferrari Dino","Porsche 914-2","Lotus Europa"],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5],[10.4,10.4,13.3,14.3,14.7,15.2,15.2,15.5,16.4,17.3,18.1,18.7,19.2,21.4,21.5,17.8,19.2,21,21,21.4,22.8,22.8,24.4,27.3,30.4,32.4,33.9,15,15.8,19.7,26,30.4],[8,8,8,8,8,8,8,8,8,8,6,8,8,6,4,6,6,6,6,4,4,4,4,4,4,4,4,8,8,6,4,4],[472,460,350,360,440,275.8,304,318,275.8,275.8,225,360,400,258,120.1,167.6,167.6,160,160,121,108,140.8,146.7,79,75.7,78.7,71.09999999999999,301,351,145,120.3,95.09999999999999],[205,215,245,245,230,180,150,150,180,180,105,175,175,110,97,123,123,110,110,109,93,95,62,66,52,66,65,335,264,175,91,113],[2.93,3,3.73,3.21,3.23,3.07,3.15,2.76,3.07,3.07,2.76,3.15,3.08,3.08,3.7,3.92,3.92,3.9,3.9,4.11,3.85,3.92,3.69,4.08,4.93,4.08,4.22,3.54,4.22,3.62,4.43,3.77],[5.25,5.424,3.84,3.57,5.345,3.78,3.435,3.52,4.07,3.73,3.46,3.44,3.845,3.215,2.465,3.44,3.44,2.62,2.875,2.78,2.32,3.15,3.19,1.935,1.615,2.2,1.835,3.57,3.17,2.77,2.14,1.513],[17.98,17.82,15.41,15.84,17.42,18,17.3,16.87,17.4,17.6,20.22,17.02,17.05,19.44,20.01,18.9,18.3,16.46,17.02,18.6,18.61,22.9,20,18.9,18.52,19.47,19.9,14.6,14.5,15.5,16.7,16.9],[0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1],[4,4,4,4,4,3,2,2,3,3,1,2,2,1,1,4,4,4,4,2,1,2,2,1,2,1,1,8,4,6,2,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>gear<\/th>\n      <th>mpg<\/th>\n      <th>cyl<\/th>\n      <th>disp<\/th>\n      <th>hp<\/th>\n      <th>drat<\/th>\n      <th>wt<\/th>\n      <th>qsec<\/th>\n      <th>vs<\/th>\n      <th>am<\/th>\n      <th>carb<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"gear","targets":1},{"name":"mpg","targets":2},{"name":"cyl","targets":3},{"name":"disp","targets":4},{"name":"hp","targets":5},{"name":"drat","targets":6},{"name":"wt","targets":7},{"name":"qsec","targets":8},{"name":"vs","targets":9},{"name":"am","targets":10},{"name":"carb","targets":11}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="design-for-the-pipe" class="level2">
<h2 class="anchored" data-anchor-id="design-for-the-pipe">Design for the pipe (<code>|&gt;</code>)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>arrange_mtcars <span class="ot">&lt;-</span> <span class="fu">arrange</span>(mtcars, gear)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>small_cars <span class="ot">&lt;-</span> <span class="fu">slice</span>(arrange_mtcars, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>small_cars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or more compactly</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>small_cars <span class="ot">&lt;-</span> <span class="fu">slice</span>(<span class="fu">arrange</span>(mtcars, gear), <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>small_cars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</code></pre>
</div>
</div>
<p>Notice how we have nested functions inside of functions. Consider using the pipe (<code>|&gt;</code>) to make the code more readable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(gear) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="ot">-&gt;</span> small_cars</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>small_cars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</code></pre>
</div>
</div>
</section>
<section id="tibbles" class="level2">
<h2 class="anchored" data-anchor-id="tibbles">Tibbles</h2>
<p>Tibbles have slighlty different rules than basic data frames in <code>R</code>. For example, tibbles work with column names that <strong>are not</strong> syntactically valid variable names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wants valid names:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">`</span><span class="at">variable 1</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">two =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  variable.1 two
1          1   3
2          2   4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># But can be coerced to use them with an extra option</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">`</span><span class="at">variable 1</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">two =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  variable 1 two
1          1   3
2          2   4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tibbles just work!</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>tbbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">variable 1</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">two =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>tbbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  `variable 1`   two
         &lt;int&gt; &lt;int&gt;
1            1     3
2            2     4</code></pre>
</div>
</div>
<p>Standard data frames enable <em>partial matching</em> of arguments so that code using only a portion of the column names still works. Tibbles prevent this from happening since it can lead to accidental errors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>tw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tbbl<span class="sc">$</span>tw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `tw`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<p>Tibbles also prevent one of the most common <code>R</code> errors: dropping dimensions. If a standard data frame subsets the columns down to a single column, the object is converted to a vector. Tibbles never do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="st">"two"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tbbl[, <span class="st">"two"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
    two
  &lt;int&gt;
1     3
2     4</code></pre>
</div>
</div>
</section>
<section id="practical-example" class="level2">
<h2 class="anchored" data-anchor-id="practical-example">Practical Example</h2>
<p>To demonstrate some syntax, let’s use tidyverse functions to read in data that could be used in modeling. The data set comes from the city of Chicago’s data portal and contains daily ridership data for the city’s elevated train stations. The data set has columns for:</p>
<ul>
<li>The station identifier (numeric)</li>
<li>The station name (character)</li>
<li>The date (character in mm/dd/yyyy format)</li>
<li>The day of the week (character)</li>
<li>The number of riders (numeric)</li>
</ul>
<p>Our tidyverse pipeline will conduct the following tasks, in order:</p>
<ol type="1">
<li><p>Use the <code>tidyverse</code> package <code>readr</code> to read the data from the source website and convert them into a tibble. To do this, the <code>read_csv()</code> function can determine the type of data by reading an initial number of rows. Alternatively, if the column names and types are already known, a column specification can be created in R and passed to <code>read_csv()</code>.</p></li>
<li><p>Filter the data to eliminate a few columns that are not needed (such as the station ID) and change the column <code>stationname</code> to <code>station</code>. The function <code>select()</code> is used for this. When filtering, use either the column names or a <code>dplyr</code> selector function. When selecting names, a new variable name can be declared using the argument format <code>new_name = old_name</code>.</p></li>
<li><p>Convert the date field to the R date format using the <code>mdy()</code> function from the <code>lubridate</code> package. We also convert the ridership numbers to thousands. Both of these computations are executed using the <code>dplyr::mutate()</code> function.</p></li>
<li><p>Use the maximum number of rides for each station and day combination. This mitigates the issue of a small number of days that have more than one record of ridership numbers at certain stations. We group the ridership data by station and day, and then summarize within each of the 1999 unique combinations with the maximum statistic.</p></li>
</ol>
<div class="cell" data-hash="tidyverse_primer_cache/html/unnamed-chunk-9_44d45c16d3ceff93b0c92dcf7ad876f3">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"http://bit.ly/raw-train-data-csv"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>all_stations <span class="ot">&lt;-</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 1: Read in the data.</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(url) <span class="sc">|&gt;</span>  </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 2: filter columns and rename stationname</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="at">station =</span> stationname, date, rides) <span class="sc">|&gt;</span>  </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 3: Convert the character date field to a date encoding.</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Also, put the data in units of 1K rides</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">mdy</span>(date), <span class="at">rides =</span> rides <span class="sc">/</span> <span class="dv">1000</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 4: Summarize the multiple records using the maximum.</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">==</span> <span class="st">"2001-01-03"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date, station) <span class="sc">|&gt;</span> </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">rides =</span> <span class="fu">max</span>(rides), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1245839 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): stationname, date, daytype
dbl (1): station_id
num (1): rides

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>all_stations <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-f3271e1add376ff1de23" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f3271e1add376ff1de23">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141"],["2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03","2001-01-03"],["18th","35-Bronzeville-IIT","35th/Archer","43rd","47th-Dan Ryan","47th-South Elevated","51st","54th/Cermak","63rd-Dan Ryan","69th","79th","87th","95th/Dan Ryan","Adams/Wabash","Addison-Brown","Addison-North Main","Addison-O'Hare","Argyle","Armitage","Ashland-Lake","Ashland-Orange","Ashland/63rd","Austin-Forest Park","Austin-Lake","Belmont-North Main","Belmont-O'Hare","Berwyn","Bryn Mawr","California-Cermak","California-Lake","California/Milwaukee","Central Park","Central-Evanston","Central-Lake","Cermak-Chinatown","Chicago/Franklin","Chicago/Milwaukee","Chicago/State","Cicero-Cermak","Cicero-Forest Park","Cicero-Lake","Clark/Division","Clark/Lake","Clinton-Forest Park","Clinton-Lake","Cumberland","Damen-Brown","Damen-Cermak","Damen/Milwaukee","Davis","Dempster","Diversey","Division/Milwaukee","East 63rd-Cottage Grove","Forest Park","Foster","Francisco","Fullerton","Garfield-Dan Ryan","Garfield-South Elevated","Grand/Milwaukee","Grand/State","Granville","Halsted-Orange","Halsted/63rd","Harlem-Forest Park","Harlem-Lake","Harlem-O'Hare","Harrison","Howard","Indiana","Irving Park-Brown","Irving Park-O'Hare","Jackson/Dearborn","Jackson/State","Jarvis","Jefferson Park","Kedzie-Brown","Kedzie-Cermak","Kedzie-Homan-Forest Park","Kedzie-Lake","Kedzie-Midway","Kimball","King Drive","Kostner","LaSalle","LaSalle/Van Buren","Lake/State","Laramie","Lawrence","Library","Linden","Logan Square","Loyola","Madison/Wabash","Main","Medical Center","Merchandise Mart","Midway Airport","Monroe/Dearborn","Monroe/State","Montrose-Brown","Montrose-O'Hare","Morse","North/Clybourn","Noyes","O'Hare Airport","Oak Park-Forest Park","Oak Park-Lake","Paulina","Polk","Pulaski-Cermak","Pulaski-Forest Park","Pulaski-Lake","Pulaski-Orange","Quincy/Wells","Racine","Randolph/Wabash","Ridgeland","Rockwell","Roosevelt","Rosemont","Sedgwick","Sheridan","Skokie","South Boulevard","Southport","Sox-35th-Dan Ryan","State/Lake","Thorndale","UIC-Halsted","Washington/Dearborn","Washington/State","Washington/Wells","Wellington","Western-Brown","Western-Cermak","Western-Forest Park","Western-Orange","Western/Milwaukee","Wilson"],[0.881,1.357,1.777,0.713,1.965,1.216,1.071,1.466,3.35,5.977,6.694,4.782,12.824,6.149,1.699,4.329,2.095,2.569,2.831,1.235,1.091,1.592,1.412,1.871,8.253,4.153,3.114,4.063,0.677,0.66,2.617,0.419,0.865,1.763,2.114,3.797,1.918,11.68,0.791,0.949,1.145,6.012,14.416,2.409,1.733,4.436,1.905,0.613,3.793,3.476,0.628,4.124,4.029,1.316,3.241,0.641,0.986,7.519,3.977,0.657,1.073,8.301,2.878,2.029,0.681,0.727,3.107,2.443,2.495,5.814,0.514,2.124,3.519,6.482,9.608000000000001,1.345,6.171,1.403,0.38,1.084,0.9429999999999999,2.588,3.48,0.627,0.269,2.023,3.809,12.622,1.128,2.441,2.095,0.993,4.366,3.781,3.523,1.139,1.628,5.766,7.448,5.431,6.922,1.888,1.786,4.047,3.263,0.459,8.584,1.282,1.333,2.004,2.217,0.397,1.06,1.394,3.922,8.051,1.388,5.472,1.222,1.186,5.243,4.769,1.954,4.147,2.363,0.842,2.635,2.843,7.781,2.476,1.945,8.257,6.783,7.321,2.449,3.272,0.457,0.8120000000000001,2.846,2.601,4.211]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>date<\/th>\n      <th>station<\/th>\n      <th>rides<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"date","targets":1},{"name":"station","targets":2},{"name":"rides","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="practice" class="level2">
<h2 class="anchored" data-anchor-id="practice">Practice</h2>
<p>Read the <code>counties.rds</code> file stored in the <code>Data</code> directory into <code>R</code> and store the results in <code>counties</code>. Examine the structure of <code>counties</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"../Data/counties.rds"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(counties)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [3,138 × 40] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ census_id         : chr [1:3138] "1001" "1003" "1005" "1007" ...
 $ state             : chr [1:3138] "Alabama" "Alabama" "Alabama" "Alabama" ...
 $ county            : chr [1:3138] "Autauga" "Baldwin" "Barbour" "Bibb" ...
 $ region            : chr [1:3138] "South" "South" "South" "South" ...
 $ metro             : chr [1:3138] "Metro" "Metro" "Nonmetro" "Metro" ...
 $ population        : num [1:3138] 55221 195121 26932 22604 57710 ...
 $ men               : num [1:3138] 26745 95314 14497 12073 28512 ...
 $ women             : num [1:3138] 28476 99807 12435 10531 29198 ...
 $ hispanic          : num [1:3138] 2.6 4.5 4.6 2.2 8.6 4.4 1.2 3.5 0.4 1.5 ...
 $ white             : num [1:3138] 75.8 83.1 46.2 74.5 87.9 22.2 53.3 73 57.3 91.7 ...
 $ black             : num [1:3138] 18.5 9.5 46.7 21.4 1.5 70.7 43.8 20.3 40.3 4.8 ...
 $ native            : num [1:3138] 0.4 0.6 0.2 0.4 0.3 1.2 0.1 0.2 0.2 0.6 ...
 $ asian             : num [1:3138] 1 0.7 0.4 0.1 0.1 0.2 0.4 0.9 0.8 0.3 ...
 $ pacific           : num [1:3138] 0 0 0 0 0 0 0 0 0 0 ...
 $ citizens          : num [1:3138] 40725 147695 20714 17495 42345 ...
 $ income            : num [1:3138] 51281 50254 32964 38678 45813 ...
 $ income_err        : num [1:3138] 2391 1263 2973 3995 3141 ...
 $ income_per_cap    : num [1:3138] 24974 27317 16824 18431 20532 ...
 $ income_per_cap_err: num [1:3138] 1080 711 798 1618 708 ...
 $ poverty           : num [1:3138] 12.9 13.4 26.7 16.8 16.7 24.6 25.4 20.5 21.6 19.2 ...
 $ child_poverty     : num [1:3138] 18.6 19.2 45.3 27.9 27.2 38.4 39.2 31.6 37.2 30.1 ...
 $ professional      : num [1:3138] 33.2 33.1 26.8 21.5 28.5 18.8 27.5 27.3 23.3 29.3 ...
 $ service           : num [1:3138] 17 17.7 16.1 17.9 14.1 15 16.6 17.7 14.5 16 ...
 $ office            : num [1:3138] 24.2 27.1 23.1 17.8 23.9 19.7 21.9 24.2 26.3 19.5 ...
 $ construction      : num [1:3138] 8.6 10.8 10.8 19 13.5 20.1 10.3 10.5 11.5 13.7 ...
 $ production        : num [1:3138] 17.1 11.2 23.1 23.7 19.9 26.4 23.7 20.4 24.4 21.5 ...
 $ drive             : num [1:3138] 87.5 84.7 83.8 83.2 84.9 74.9 84.5 85.3 85.1 83.9 ...
 $ carpool           : num [1:3138] 8.8 8.8 10.9 13.5 11.2 14.9 12.4 9.4 11.9 12.1 ...
 $ transit           : num [1:3138] 0.1 0.1 0.4 0.5 0.4 0.7 0 0.2 0.2 0.2 ...
 $ walk              : num [1:3138] 0.5 1 1.8 0.6 0.9 5 0.8 1.2 0.3 0.6 ...
 $ other_transp      : num [1:3138] 1.3 1.4 1.5 1.5 0.4 1.7 0.6 1.2 0.4 0.7 ...
 $ work_at_home      : num [1:3138] 1.8 3.9 1.6 0.7 2.3 2.8 1.7 2.7 2.1 2.5 ...
 $ mean_commute      : num [1:3138] 26.5 26.4 24.1 28.8 34.9 27.5 24.6 24.1 25.1 27.4 ...
 $ employed          : num [1:3138] 23986 85953 8597 8294 22189 ...
 $ private_work      : num [1:3138] 73.6 81.5 71.8 76.8 82 79.5 77.4 74.1 85.1 73.1 ...
 $ public_work       : num [1:3138] 20.9 12.3 20.8 16.1 13.5 15.1 16.2 20.8 12.1 18.5 ...
 $ self_employed     : num [1:3138] 5.5 5.8 7.3 6.7 4.2 5.4 6.2 5 2.8 7.9 ...
 $ family_work       : num [1:3138] 0 0.4 0.1 0.4 0.4 0 0.2 0.1 0 0.5 ...
 $ unemployment      : num [1:3138] 7.6 7.5 17.6 8.3 7.7 18 10.9 12.3 8.9 7.9 ...
 $ land_area         : num [1:3138] 594 1590 885 623 645 ...</code></pre>
</div>
</div>
<ul>
<li>Select the variables <code>state</code>, <code>county</code>, <code>population</code>, <code>private_work</code>, <code>public_work</code>, and <code>self_employed</code> and store the result in <code>counties_selected</code>.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>counties_selected <span class="ot">&lt;-</span> counties <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>         county, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>         population, </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>         private_work, </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>         public_work, </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>         self_employed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Add a verb to sort the observations of the <code>public_work</code> variable in descending order.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>counties_selected <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(public_work))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,138 × 6
   state        county         population private_work public_work self_employed
   &lt;chr&gt;        &lt;chr&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
 1 Hawaii       Kalawao                85         25          64.1          10.9
 2 Alaska       Yukon-Koyukuk…       5644         33.3        61.7           5.1
 3 Wisconsin    Menominee            4451         36.8        59.1           3.7
 4 North Dakota Sioux                4380         32.9        56.8          10.2
 5 South Dakota Todd                 9942         34.4        55             9.8
 6 Alaska       Lake and Peni…       1474         42.2        51.6           6.1
 7 California   Lassen              32645         42.6        50.5           6.8
 8 South Dakota Buffalo              2038         48.4        49.5           1.8
 9 South Dakota Dewey                5579         34.9        49.2          14.7
10 Texas        Kenedy                565         51.9        48.1           0  
# ℹ 3,128 more rows</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>